app-version: 3.0.0-beta.134

app:
  enableCheckDigitConv: ${CHECK_DIGIT_CONVERSION:false}
  patient-id-pattern: "[^0]\\d{8}"

fhir:
  codings:
    loinc:
      system: "${fhir.systems.loinc}"
      version: "2.80"
    snomed:
      system: "${fhir.systems.snomed}"
      version: "http://snomed.info/sct/900000000000207008/version/20250501"
    ops:
      system: "${fhir.systems.ops}"
      version: "2025"
  extensions:
    fernMetaExt: "http://dktk.dkfz.de/fhir/StructureDefinition/onco-core-Extension-Fernmetastasen"
    opIntention: "http://dktk.dkfz.de/fhir/StructureDefinition/onco-core-Extension-OPIntention"
    stellungOP: "http://dktk.dkfz.de/fhir/StructureDefinition/onco-core-Extension-StellungZurOp"
    systIntention: "http://dktk.dkfz.de/fhir/StructureDefinition/onco-core-Extension-SYSTIntention"
    sysTheraProto: "http://dktk.dkfz.de/fhir/StructureDefinition/onco-core-Extension-SystemischeTherapieProtokoll"
    dataAbsentReason: "http://hl7.org/fhir/StructureDefinition/data-absent-reason"
    genderAmtlich: "http://fhir.de/StructureDefinition/gender-amtlich-de"
    condition-asserted-date: "http://hl7.org/fhir/StructureDefinition/condition-assertedDate"
    condition-related: "http://hl7.org/fhir/StructureDefinition/condition-related"
    ordinal-value: "http://hl7.org/fhir/StructureDefinition/ordinalValue"
    mii-ex-onko-strahlentherapie-intention: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-ex-onko-strahlentherapie-intention"
    mii-ex-onko-strahlentherapie-stellungzurop: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-ex-onko-strahlentherapie-stellungzurop"
    mii-ex-onko-strahlentherapie-bestrahlung: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-ex-onko-strahlentherapie-bestrahlung"
    mii-ex-onko-histology-morphology-behavior-icdo3: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-ex-onko-histology-morphology-behavior-icdo3"
    mii-ex-onko-systemische-therapie-intention: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-ex-onko-systemische-therapie-intention"
    mii-ex-onko-op-intention: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-ex-onko-operation-intention"
    mii-ex-onko-strahlentherapie-bestrahlung-einzeldosis: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-ex-onko-strahlentherapie-bestrahlung-einzeldosis"
    mii-ex-onko-strahlentherapie-bestrahlung-gesamtdosis: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-ex-onko-strahlentherapie-bestrahlung-gesamtdosis"
    mii-ex-onko-strahlentherapie-bestrahlung-boost: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-ex-onko-strahlentherapie-bestrahlung-boost"
    mii-ex-onko-strahlentherapie-bestrahlung-seitenlokalisation: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-ex-onko-strahlentherapie-bestrahlung-seitenlokalisation"
  systems:
    identifiers:
      base-url: "https://bzkf.github.io/obds-to-fhir/identifiers"
      patient-id: "${fhir.systems.identifiers.base-url}/patient-id"
      primaerdiagnose-condition-id: "${fhir.systems.identifiers.base-url}/primaerdiagnose-condition-id"
      histologie-specimen-id: "${fhir.systems.identifiers.base-url}/histologie-specimen-id"
      studienteilnahme-observation-id: "${fhir.systems.identifiers.base-url}/studienteilnahme-observation-id"
      lymphknotenuntersuchung-observation-id: "${fhir.systems.identifiers.base-url}/lymphknotenuntersuchung-observation-id"
      verlaufshistologie-observation-id: "${fhir.systems.identifiers.base-url}/verlaufshistologie-observation-id"
      verlauf-observation-id: "${fhir.systems.identifiers.base-url}/verlauf-observation-id"
      gleason-score-observation-id: "${fhir.systems.identifiers.base-url}/gleason-score-observation-id"
      strahlentherapie-procedure-id: "${fhir.systems.identifiers.base-url}/strahlentherapie-procedure-id"
      strahlentherapie-bestrahlung-procedure-id: "${fhir.systems.identifiers.base-url}/strahlentherapie-bestrahlung-procedure-id"
      systemische-therapie-procedure-id: "${fhir.systems.identifiers.base-url}/systemische-therapie-procedure-id"
      systemische-therapie-medication-statement-id: "${fhir.systems.identifiers.base-url}/systemische-therapie-medication-statement-id"
      allgemeiner-leistungszustand-ecog-observation-id: "${fhir.systems.identifiers.base-url}/allgemeiner-leistungszustand-ecog-id"
      fernmetastasen-observation-id: "${fhir.systems.identifiers.base-url}/fernmetastasen-id"
      residualstatus-observation-id: "${fhir.systems.identifiers.base-url}/residualstatus-observation-id"
      histologiebefund-diagnostic-report-id: "${fhir.systems.identifiers.base-url}/histologiebefund-diagnostic-report-id"
      genetische-variante-observation-id: "${fhir.systems.identifiers.base-url}/genetische-variante-observation-id"
      nebenwirkung-adverse-event-id: "${fhir.systems.identifiers.base-url}/nebenwirkung-adverse-event-id"
      tod-observation-id: "${fhir.systems.identifiers.base-url}/tod-observation-id"
      grading-observation-id: "${fhir.systems.identifiers.base-url}/grading-observation-id"
      tnm-grouping-observation-id: "${fhir.systems.identifiers.base-url}/tnm-grouping-observation-id"
      tnm-t-kategorie-observation-id: "${fhir.systems.identifiers.base-url}/tnm-t-kategorie-observation-id"
      tnm-n-kategorie-observation-id: "${fhir.systems.identifiers.base-url}/tnm-n-kategorie-observation-id"
      tnm-m-kategorie-observation-id: "${fhir.systems.identifiers.base-url}/tnm-m-kategorie-observation-id"
      tnm-l-kategorie-observation-id: "${fhir.systems.identifiers.base-url}/tnm-l-kategorie-observation-id"
      tnm-pn-kategorie-observation-id: "${fhir.systems.identifiers.base-url}/tnm-pn-kategorie-observation-id"
      tnm-s-kategorie-observation-id: "${fhir.systems.identifiers.base-url}/tnm-s-kategorie-observation-id"
      tnm-v-kategorie-observation-id: "${fhir.systems.identifiers.base-url}/tnm-v-kategorie-observation-id"
      tnm-a-symbol-observation-id: "${fhir.systems.identifiers.base-url}/tnm-a-symbol-observation-id"
      tnm-m-symbol-observation-id: "${fhir.systems.identifiers.base-url}/tnm-m-symbol-observation-id"
      tnm-r-symbol-observation-id: "${fhir.systems.identifiers.base-url}/tnm-r-symbol-observation-id"
      tnm-y-symbol-observation-id: "${fhir.systems.identifiers.base-url}/tnm-y-symbol-observation-id"
      tumorkonferenz-care-plan-id: "${fhir.systems.identifiers.base-url}/tumorkonferenz-care-plan-id"
      weitere-klassifikation-observation-id: "${fhir.systems.identifiers.base-url}/weitere-klassifikation-observation-id"
      erstdiagnose-evidenz-list-id: "${fhir.systems.identifiers.base-url}/erstdiagnose-evidenz-list-id"
      fruehere-tumorerkrankung-condition-id: "${fhir.systems.identifiers.base-url}/fruehere-tumorerkrankung-condition-id"

    # DKTK
    observationId: "${fhir.systems.identifiers.base-url}/observation-id"
    procedureId: "${fhir.systems.identifiers.base-url}/procedure-id"
    operationProcedureId: "${fhir.systems.identifiers.base-url}/operation-procedure-id"
    medicationStatementId: "${fhir.systems.identifiers.base-url}/medication-statement-id"
    psaObservationId: "${fhir.systems.identifiers.base-url}/psa-observation-id"

    # external systems
    identifier-type: "http://terminology.hl7.org/CodeSystem/v2-0203"
    observationCategorySystem: "http://hl7.org/fhir/observation-category"
    loinc: "http://loinc.org"
    icdo3Morphologie: "http://terminology.hl7.org/CodeSystem/icd-o-3"
    icdo3MorphologieOid: "urn:oid:2.16.840.1.113883.6.43.1"

    # DKTK
    gradingDktk: "http://dktk.dkfz.de/fhir/onco/core/CodeSystem/GradingCS"
    uicc: "http://dktk.dkfz.de/fhir/onco/core/CodeSystem/UiccstadiumCS"
    tnmPraefix: "http://dktk.dkfz.de/fhir/onco/core/CodeSystem/TNMcpuPraefixTCS"
    tnmTCs: "http://dktk.dkfz.de/fhir/onco/core/CodeSystem/TNMTCS"
    tnmNCs: "http://dktk.dkfz.de/fhir/onco/core/CodeSystem/TNMNCS"
    tnmMCs: "http://dktk.dkfz.de/fhir/onco/core/CodeSystem/TNMMCS"
    tnmYSymbolCs: "http://dktk.dkfz.de/fhir/onco/core/CodeSystem/TNMySymbolCS"
    tnmRSymbolCs: "http://dktk.dkfz.de/fhir/onco/core/CodeSystem/TNMrSymbolCS"
    tnmMSymbolCs: "http://dktk.dkfz.de/fhir/onco/core/CodeSystem/TNMmSymbolCS"
    fMLokalisationCS: "http://dktk.dkfz.de/fhir/onco/core/CodeSystem/FMLokalisationCS"
    jnuCs: "http://dktk.dkfz.de/fhir/onco/core/CodeSystem/JNUCS"
    lokalBeurtResidualCS: "http://dktk.dkfz.de/fhir/onco/core/CodeSystem/LokaleBeurteilungResidualstatusCS"
    gesamtBeurtResidualCS: "http://dktk.dkfz.de/fhir/onco/core/CodeSystem/GesamtbeurteilungResidualstatusCS"
    systIntention: "http://dktk.dkfz.de/fhir/onco/core/CodeSystem/SYSTIntentionCS"
    systStellungOP: "http://dktk.dkfz.de/fhir/onco/core/CodeSystem/SYSTStellungOPCS"
    opIntention: "http://dktk.dkfz.de/fhir/onco/core/CodeSystem/OPIntentionCS"
    systTherapieart: "http://dktk.dkfz.de/fhir/onco/core/CodeSystem/SYSTTherapieartCS"
    adtSeitenlokalisation: "http://dktk.dkfz.de/fhir/onco/core/CodeSystem/SeitenlokalisationCS"

    icd10gm: "http://fhir.de/CodeSystem/bfarm/icd-10-gm"
    snomed: "http://snomed.info/sct"
    ops: "http://fhir.de/CodeSystem/bfarm/ops"
    ctcaeGrading: "http://hl7.org/fhir/us/ctcae/CodeSystem/ctcae-grade-code-system"
    sideEffectTypeOid: "urn:oid:1.2.276.0.76.3.1.131.1.5.20"
    opComplication: "urn:oid:1.2.276.0.76.3.1.131.1.5.122"
    observation-value: "http://terminology.hl7.org/CodeSystem/v3-ObservationValue"
    genderAmtlichDe: "http://fhir.de/CodeSystem/gender-amtlich-de"
    ucum: "http://unitsofmeasure.org"
    condition-ver-status: "http://terminology.hl7.org/CodeSystem/condition-ver-status"
    tnm-uicc: "https://www.uicc.org/resources/tnm"
    atcBfarm: "http://fhir.de/CodeSystem/bfarm/atc"
    atcWho: "http://www.whocc.no/atc"
    observationCategory: "http://terminology.hl7.org/CodeSystem/observation-category"
    meddra: "https://www.meddra.org"

    # MII
    mii-cs-onko-intention: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/CodeSystem/mii-cs-onko-intention"
    mii-cs-onko-primaertumor-diagnosesicherung: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/CodeSystem/mii-cs-onko-primaertumor-diagnosesicherung"
    mii-cs-onko-strahlentherapie-applikationsart: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/CodeSystem/mii-cs-onko-strahlentherapie-applikationsart"
    mii-cs-onko-strahlentherapie-strahlenart: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/CodeSystem/mii-cs-onko-strahlentherapie-strahlenart"
    mii-cs-onko-strahlentherapie-zielgebiet: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/CodeSystem/mii-cs-onko-strahlentherapie-zielgebiet"
    mii-cs-onko-therapie-stellungzurop: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/CodeSystem/mii-cs-therapie-stellungzurop"
    mii-cs-onko-seitenlokalisation: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/CodeSystem/mii-cs-onko-seitenlokalisation"
    mii-cs-onko-systemische-therapie-art: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/CodeSystem/mii-cs-onko-therapie-typ"
    mii-cs-onko-operation-residualstatus: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/CodeSystem/mii-cs-onko-residualstatus"
    mii-cs-onko-residualstatus: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/CodeSystem/mii-cs-onko-residualstatus"
    mii-cs-therapie-grund-ende: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/CodeSystem/mii-cs-therapie-grund-ende"
    mii-cs-onko-fernmetastasen: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/CodeSystem/mii-cs-onko-fernmetastasen"
    mii-cs-onko-tod-interpretation: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/CodeSystem/mii-cs-onko-tod"
    mii-cs-onko-strahlentherapie-boost: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/CodeSystem/mii-cs-onko-strahlentherapie-boost"
    mii-cs-onko-grading: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/CodeSystem/mii-cs-onko-grading"
    mii-cs-onko-verlauf-primaertumor: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/CodeSystem/mii-cs-onko-verlauf-primaertumor"
    mii-cs-onko-verlauf-lymphknoten: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/CodeSystem/mii-cs-onko-verlauf-lymphknoten"
    mii-cs-onko-verlauf-fernmetastasen: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/CodeSystem/mii-cs-onko-verlauf-fernmetastasen"
    mii-cs-onko-verlauf-gesamtbeurteilung: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/CodeSystem/mii-cs-onko-verlauf-gesamtbeurteilung"
    mii-cs-onko-allgemeiner-leistungszustand-ecog: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/CodeSystem/mii-cs-onko-allgemeiner-leistungszustand-ecog"
    mii-cs-onko-studienteilnahme: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/CodeSystem/mii-cs-onko-studienteilnahme"
    mii-cs-onko-genetische-variante-auspraegung: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/CodeSystem/mii-cs-onko-genetische-variante-auspraegung"
    mii-cs-onko-nebenwirkung-ctcae-grad: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/CodeSystem/mii-cs-onko-nebenwirkung-ctcae-grad"
    mii-cs-onko-therapieplanung-typ: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/CodeSystem/mii-cs-onko-therapieplanung-typ"
    mii-cs-onko-therapie-typ: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/CodeSystem/mii-cs-onko-therapie-typ"
    mii-cs-onko-therapieabweichung: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/CodeSystem/mii-cs-onko-therapieabweichung"
    mii-cs-onko-tnm-version: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/CodeSystem/mii-cs-onko-tnm-version"

  profiles:
    histologie: "http://dktk.dkfz.de/fhir/StructureDefinition/onco-core-Observation-Histologie"
    grading: "http://dktk.dkfz.de/fhir/StructureDefinition/onco-core-Observation-Grading"
    tnmC: "http://dktk.dkfz.de/fhir/StructureDefinition/onco-core-Observation-TNMc"
    tnmP: "http://dktk.dkfz.de/fhir/StructureDefinition/onco-core-Observation-TNMp"
    fernMeta: "http://dktk.dkfz.de/fhir/StructureDefinition/onco-core-Observation-Fernmetastasen"
    condition: "http://dktk.dkfz.de/fhir/StructureDefinition/onco-core-Condition-Primaerdiagnose"
    genVariante: "http://dktk.dkfz.de/fhir/StructureDefinition/onco-core-Observation-GenetischeVariante"
    opProcedure: "http://dktk.dkfz.de/fhir/StructureDefinition/onco-core-Procedure-Operation"
    stProcedure: "http://dktk.dkfz.de/fhir/StructureDefinition/onco-core-Procedure-Strahlentherapie"
    systMedStatement: "http://dktk.dkfz.de/fhir/StructureDefinition/onco-core-MedicationStatement-Systemtherapie"
    deathObservation: "http://dktk.dkfz.de/fhir/StructureDefinition/onco-core-Observation-TodUrsache"
    # MII
    versions:
      # renovate: datasource=npm depName=de.medizininformatikinitiative.kerndatensatz.person
      mii-person: "|2025.0.0"
      # renovate: datasource=npm depName=de.medizininformatikinitiative.kerndatensatz.onkologie
      mii-onkologie: "|2025.0.4"
      # renovate: datasource=npm depName=de.medizininformatikinitiative.kerndatensatz.medikation
      mii-medikation: "|2025.0.0"
    mii-patient-pseudonymisiert: "https://www.medizininformatik-initiative.de/fhir/core/modul-person/StructureDefinition/PatientPseudonymisiert${fhir.profiles.versions.mii-person}"
    mii-pr-medication-statement: "https://www.medizininformatik-initiative.de/fhir/core/modul-medikation/StructureDefinition/MedicationStatement${fhir.profiles.versions.mii-medikation}"
    mii-pr-onko-operation: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-operation${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-diagnose-primaertumor: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-diagnose-primaertumor${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-strahlentherapie: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-strahlentherapie${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-fernmetastasen: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-fernmetastasen${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-systemische-therapie: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-systemische-therapie${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-systemische-therapie-medikation: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-systemische-therapie-medikation${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-specimen: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-specimen${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-anzahl-befallene-lymphknoten: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-anzahl-befallene-lymphknoten${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-anzahl-befallene-sentinel-lymphknoten: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-anzahl-befallene-sentinel-lymphknoten${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-anzahl-untersuchte-lymphknoten: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-anzahl-untersuchte-lymphknoten${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-anzahl-untersuchte-sentinel-lymphknoten: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-anzahl-untersuchte-sentinel-lymphknoten${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-allgemeiner-leistungszustand-ecog: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-allgemeiner-leistungszustand-ecog${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-tod: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-tod${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-histologie-icdo3: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-histologie-icdo3${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-studienteilnahme: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-studienteilnahme${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-genetische-variante: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-genetische-variante${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-nebenwirkung-adverse-event: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-nebenwirkung-adverse-event${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-verlauf: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-verlauf${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-tumorkonferenz: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-tumorkonferenz${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-tnm-klassifikation: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-tnm-klassifikation${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-tnm-t-kategorie: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-tnm-t-kategorie${fhir.profiles.versions.mii-onkologie}"
    mii-ex-onko-tnm-cp-praefix: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-ex-onko-tnm-cp-praefix${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-tnm-n-kategorie: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-tnm-n-kategorie${fhir.profiles.versions.mii-onkologie}"
    mii-ex-onko-tnm-itc-suffix: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-ex-onko-tnm-itc-suffix${fhir.profiles.versions.mii-onkologie}"
    mii-ex-onko-tnm-sn-suffix: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-ex-onko-tnm-sn-suffix${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-tnm-m-kategorie: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-tnm-m-kategorie${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-tnm-a-symbol: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-tnm-a-symbol${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-tnm-m-symbol: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-tnm-m-symbol${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-tnm-l-kategorie: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-tnm-l-kategorie${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-tnm-pn-kategorie: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-tnm-pn-kategorie${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-tnm-r-symbol: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-tnm-r-symbol${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-tnm-s-kategorie: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-tnm-s-kategorie${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-tnm-v-kategorie: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-tnm-v-kategorie${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-tnm-y-symbol: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-tnm-y-symbol${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-weitere-klassifikationen: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-weitere-klassifikationen${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-befund: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-befund${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-grading: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-grading${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-liste-evidenz-erstdiagnose: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-liste-evidenz-erstdiagnose${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-strahlentherapie-bestrahlung-strahlentherapie: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-strahlentherapie-bestrahlung-strahlentherapie${fhir.profiles.versions.mii-onkologie}"
    mii-pr-onko-strahlentherapie-bestrahlung-nuklearmedizin: "https://www.medizininformatik-initiative.de/fhir/ext/modul-onko/StructureDefinition/mii-pr-onko-strahlentherapie-bestrahlung-nuklearmedizin${fhir.profiles.versions.mii-onkologie}"

  display:
    histologyLoinc: "Histology and Behavior ICD-O-3 Cancer"
    gradingLoinc: "Grade pathology value Cancer"
    tnmcLoinc: "Stage group.clinical Cancer"
    tnmpLoinc: "Stage group.pathology Cancer"
    fernMetaLoinc: "Distant metastases.clinical"
    deathLoinc: "Primary cause of death"
    gleasonScoreSct: "Gleason score (observable entity)"
    gleasonScoreLoinc: "Gleason score in Specimen Qualitative"
    psaLoinc: "Prostate specific Ag [Mass/volume] in Serum or Plasma"
  url:
    tnmPraefix: "http://dktk.dkfz.de/fhir/StructureDefinition/onco-core-Extension-TNMcpuPraefix"

  mappings:
    meta:
      source: ""
    modul:
      prostata:
        enabled: false
    create-patient-resources:
      enabled: ${CREATE_PATIENT_FHIR_RESOURCES:true}
    patient-reference-generation:
      strategy: SHA256_HASHED_PATIENT_IDENTIFIER_SYSTEM_AND_PATIENT_ID

obdsv2-to-v3:
  mapper:
    ignore-unmappable: true
    fix-missing-id: true
    disable-schema-validation: false

spring:
  profiles:
    active: ${ACTIVE_PROFILE:default}
  application:
    name: obds-to-fhir
  cloud:
    function:
      definition: "getMeldungExportObdsV3Processor"
    stream:
      bindings:
        getMeldungExportObdsProcessor-in-0:
          destination: onkostar.MELDUNG_EXPORT${YEAR_LIMITATION_SUFFIX:}
        getMeldungExportObdsProcessor-in-1:
          destination: fhir.obds.Observation${YEAR_LIMITATION_SUFFIX:}
        getMeldungExportObdsProcessor-out-0:
          destination: fhir.obds.MedicationStatement${YEAR_LIMITATION_SUFFIX:}
          producer:
            partition-count: ${FHIR_OUTPUT_TOPIC_PARTITION_COUNT:12}
        getMeldungExportObdsProcessor-out-1:
          destination: fhir.obds.Observation${YEAR_LIMITATION_SUFFIX:}
          producer:
            partition-count: ${FHIR_OUTPUT_TOPIC_PARTITION_COUNT:12}
        getMeldungExportObdsProcessor-out-2:
          destination: fhir.obds.Procedure${YEAR_LIMITATION_SUFFIX:}
          producer:
            partition-count: ${FHIR_OUTPUT_TOPIC_PARTITION_COUNT:12}
        getMeldungExportObdsProcessor-out-3:
          destination: fhir.obds.Condition${YEAR_LIMITATION_SUFFIX:}
          producer:
            partition-count: ${FHIR_OUTPUT_TOPIC_PARTITION_COUNT:12}
        getMeldungExportObdsProcessor-out-4:
          destination: fhir.obds.Patient${YEAR_LIMITATION_SUFFIX:}
          producer:
            partition-count: ${FHIR_OUTPUT_TOPIC_PARTITION_COUNT:12}
        getMeldungExportObdsV3Processor-in-0:
          destination: onkostar.MELDUNG_EXPORT${YEAR_LIMITATION_SUFFIX:}
        getMeldungExportObdsV3Processor-out-0:
          destination: fhir.obds.bundles${YEAR_LIMITATION_SUFFIX:}
          producer:
            partition-count: ${FHIR_OUTPUT_TOPIC_PARTITION_COUNT:12}

      kafka:
        streams:
          binder:
            configuration:
              cache.max.bytes.buffering: 0
              max.request.size: ${MAX_REQUEST_SIZE:20971520}
              num.stream.threads: ${NUM_STREAM_THREADS:1}
              default:
                key.serde: org.apache.kafka.common.serialization.Serdes$StringSerde
          bindings:
            getMeldungExportObdsProcessor-in-0:
              consumer:
                application-id: obds-meldung-exp-grouped-processor${YEAR_LIMITATION_SUFFIX:}
            getMeldungExportObdsProcessor-in-1:
              consumer:
                valueSerde: org.miracum.kafka.serializers.KafkaFhirSerde
                application-id: obds-meldung-exp-condition-processor${YEAR_LIMITATION_SUFFIX:}
            getMeldungExportObdsProcessor-out-0:
              producer:
                valueSerde: org.miracum.kafka.serializers.KafkaFhirSerde
                configuration:
                  compression.type: ${COMPRESSION_TYPE:gzip}
            getMeldungExportObdsProcessor-out-1:
              producer:
                valueSerde: org.miracum.kafka.serializers.KafkaFhirSerde
                configuration:
                  compression.type: ${COMPRESSION_TYPE:gzip}
            getMeldungExportObdsProcessor-out-2:
              producer:
                valueSerde: org.miracum.kafka.serializers.KafkaFhirSerde
                configuration:
                  compression.type: ${COMPRESSION_TYPE:gzip}
            getMeldungExportObdsProcessor-out-3:
              producer:
                valueSerde: org.miracum.kafka.serializers.KafkaFhirSerde
                configuration:
                  compression.type: ${COMPRESSION_TYPE:gzip}
            getMeldungExportObdsProcessor-out-4:
              producer:
                valueSerde: org.miracum.kafka.serializers.KafkaFhirSerde
                configuration:
                  compression.type: ${COMPRESSION_TYPE:gzip}
            getMeldungExportObdsV3Processor-in-0:
              consumer:
                application-id: ${KAFKA_GROUP_ID:obds-meldung-exp-v3-processor}
            getMeldungExportObdsV3Processor-out-0:
              producer:
                valueSerde: org.miracum.kafka.serializers.KafkaFhirSerde
                configuration:
                  compression.type: ${COMPRESSION_TYPE:gzip}

  kafka:
    bootstrapServers: ${BOOTSTRAP_SERVERS:localhost:9094}
    security.protocol: ${SECURITY_PROTOCOL:PLAINTEXT}
    ssl:
      trust-store-type: PKCS12
      trust-store-location: file://${SSL_TRUST_STORE:/opt/kafka-certs/ca.p12}
      trust-store-password: ${SSL_TRUST_STORE_PASSWORD}
      key-store-type: PKCS12
      key-store-location: file://${SSL_KEY_STORE_FILE:/opt/kafka-certs/user.p12}
      key-store-password: ${SSL_KEY_STORE_PASSWORD}
    producer:
      compression-type: gzip
      value-serializer: org.miracum.kafka.serializers.KafkaFhirSerializer

logging:
  pattern:
    console: "%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){faint} %clr(${LOG_LEVEL_PATTERN:%5p}) %clr(-){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m %X %n${LOG_EXCEPTION_CONVERSION_WORD:%wEx}"

management:
  endpoint:
    health:
      show-details: always
      probes:
        enabled: true
        add-additional-paths: true
  endpoints:
    web:
      exposure:
        include: "health,prometheus,kafkastreamstopology"
  health:
    livenessstate:
      enabled: true
    readinessstate:
      enabled: true

obds:
  process-from-directory:
    enabled: false
    path: ""
    output-to-kafka:
      enabled: false
      topic: ""
    output-to-directory:
      enabled: false
      path: ""
  write-grouped-obds-to-kafka:
    enabled: false
    topic: "obds.v3.grouped"
